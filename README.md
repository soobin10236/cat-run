# ğŸ± Cat Run Game - ê°œë°œì ê°€ì´ë“œ

## ğŸ“¸ ìŠ¤í¬ë¦°ìƒ·
| ê²Œì„ í”Œë ˆì´ | ë¦¬ë”ë³´ë“œ & ì‹ ê¸°ë¡ |
|:---:|:---:|
| ![Game Play](src/assets/images/screenshot_play.png) | ![Leaderboard](src/assets/images/screenshot_leaderboard.png) |
> *ì´ë¯¸ì§€ë¥¼ `src/assets/images/` ê²½ë¡œì— ì¶”ê°€í•˜ê±°ë‚˜ ë§í¬ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”.*

## ğŸ“‹ ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
3. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
4. [ê²Œì„ ì„¤ê³„](#ê²Œì„-ì„¤ê³„)
5. [Firebase ê¸°ëŠ¥](#firebase-ê¸°ëŠ¥)
6. [ì£¼ìš” í´ë˜ìŠ¤ ì„¤ëª…](#ì£¼ìš”-í´ë˜ìŠ¤-ì„¤ëª…)
7. [ê²Œì„ ë°¸ëŸ°ìŠ¤ ìˆ˜ì¹˜](#ê²Œì„-ë°¸ëŸ°ìŠ¤-ìˆ˜ì¹˜)
8. [ê°œë°œ í™˜ê²½ ì„¤ì •](#ê°œë°œ-í™˜ê²½-ì„¤ì •)
9. [ìˆ˜ì • ê°€ì´ë“œ](#ìˆ˜ì •-ê°€ì´ë“œ)

---

## í”„ë¡œì íŠ¸ ê°œìš”

**Cat Run Game**ì€ HTML5 Canvasì™€ Vanilla JavaScriptë¡œ ì œì‘ëœ ë¬´í•œ ëŸ¬ë‹ ê²Œì„ì…ë‹ˆë‹¤. Firebaseë¥¼ ì—°ë™í•˜ì—¬ ì‹¤ì‹œê°„ ë¦¬ë”ë³´ë“œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

### ê²Œì„ ì»¨ì…‰
- **ì¥ë¥´**: 2D ë¬´í•œ ëŸ¬ë‹ (Endless Runner)
- **í…Œë§ˆ**: ë’·ê³¨ëª©ì„ ë‹¬ë¦¬ëŠ” ê³ ì–‘ì´
- **ì¡°ì‘**: 
  - **PC**: ì í”„(â†‘/Space), ìŠ¬ë¼ì´ë“œ(â†“)
  - **Mobile**: í„°ì¹˜ ë²„íŠ¼ (ì í”„/ìŠ¬ë¼ì´ë“œ)
- **ëª©í‘œ**: ì¥ì• ë¬¼ì„ í”¼í•˜ê³  ì•„ì´í…œì„ ìˆ˜ì§‘í•˜ë©° ìµœê³  ì ìˆ˜ ë‹¬ì„±

---

## ê¸°ìˆ  ìŠ¤íƒ

### ì½”ì–´ ê¸°ìˆ 
- **HTML5 Canvas**: ê²Œì„ ë Œë”ë§
- **Vanilla JavaScript (ES6+)**: ê²Œì„ ë¡œì§
- **CSS3**: UI ìŠ¤íƒ€ì¼ë§ (ë°˜ì‘í˜• ë””ìì¸, ê¸€ë˜ìŠ¤ëª¨í”¼ì¦˜)
- **Web Audio API**: íš¨ê³¼ìŒ ì¬ìƒ

### ë°±ì—”ë“œ (BaaS)
- **Firebase Firestore**: ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ (ì ìˆ˜ ì €ì¥)
- **Firebase Hosting**: ì›¹ í˜¸ìŠ¤íŒ… (ì˜ˆì •)

### ì£¼ìš” ê¸°ëŠ¥
- âœ… **ìŠ¤í”„ë¼ì´íŠ¸ ì• ë‹ˆë©”ì´ì…˜** (í”Œë ˆì´ì–´, ë“œë¡ )
- âœ… **ë¬¼ë¦¬ ì—”ì§„** (ì¤‘ë ¥, ê°€ë³€ ì í”„)
- âœ… **ì¶©ëŒ ê°ì§€** (AABB, íˆíŠ¸ë°•ìŠ¤ ìµœì í™”)
- âœ… **ë™ì  ë‚œì´ë„ ì¡°ì ˆ** (ì†ë„/ì¥ì• ë¬¼ ë¹ˆë„)
- âœ… **ì‹¤ì‹œê°„ ë¦¬ë”ë³´ë“œ** (Top 10 ë­í‚¹)
- âœ… **ëª¨ë°”ì¼ ìµœì í™”** (í„°ì¹˜ ì»¨íŠ¸ë¡¤, ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ, PWA ì§€ì›)
- âœ… **UI/UX ê°œì„ ** (ì¹´ë“œí˜• ëª¨ë‹¬, ì§ê´€ì ì¸ ë²„íŠ¼ ë°°ì¹˜)
- âœ… **ì´ë¯¸ì§€ í”„ë¦¬ë¡œë”©** (ë¦¬ì†ŒìŠ¤ ë¯¸ë¦¬ ë¡œë“œ, ë¡œë”© ìƒíƒœ í‘œì‹œ)
- âœ… **ìë™ ì—…ë°ì´íŠ¸** (ìƒˆ ë²„ì „ ë°°í¬ ì‹œ ì‚¬ìš©ì ì•Œë¦¼ ë° ìƒˆë¡œê³ ì¹¨)
- âœ… **ëª¨ë“  ê¸°ë¡ ì €ì¥** (ìˆœìœ„ê¶Œ ë°–ì€ 'Anonymous'ë¡œ ìë™ ì €ì¥)

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
scratch/
â”œâ”€â”€ index.html              # ë©”ì¸ HTML (ê²Œì„ ì»¨í…Œì´ë„ˆ, UI)
â”œâ”€â”€ style.css               # ì „ì—­ ìŠ¤íƒ€ì¼ (ëª¨ë°”ì¼ ëŒ€ì‘, PWA)
â”œâ”€â”€ manifest.json           # PWA ì„¤ì • íŒŒì¼
â”œâ”€â”€ server.ps1              # ë¡œì»¬ ê°œë°œ ì„œë²„ (PowerShell)
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ main.js             # ì§„ì…ì  (ê²Œì„ ì´ˆê¸°í™”)
    â”œâ”€â”€ GameManager.js      # ê²Œì„ ë£¨í”„, ìƒíƒœ ê´€ë¦¬, Firebase ì—°ë™
    â”‚
    â”œâ”€â”€ constants/
    â”‚   â”œâ”€â”€ Assets.js       # ë¦¬ì†ŒìŠ¤ ê²½ë¡œ ê´€ë¦¬
    â”‚   â””â”€â”€ Version.js      # ê²Œì„ ë²„ì „ ê´€ë¦¬
    â”‚
    â”œâ”€â”€ entities/
    â”‚   â”œâ”€â”€ Player.js       # í”Œë ˆì´ì–´ (ê³ ì–‘ì´)
    â”‚   â”œâ”€â”€ Obstacle.js     # ì¥ì• ë¬¼ (ì§€ìƒ/ê³µì¤‘)
    â”‚   â”œâ”€â”€ Item.js         # ì•„ì´í…œ (í™©ê¸ˆ ìƒì„ )
    â”‚   â””â”€â”€ Background.js   # ë°°ê²½ (ë¬´í•œ ìŠ¤í¬ë¡¤, íŒ¨ëŸ´ë™ìŠ¤)
    â”‚
    â”œâ”€â”€ utils/
    â”‚   â”œâ”€â”€ InputHandler.js # í‚¤ë³´ë“œ/í„°ì¹˜ ì…ë ¥ ì²˜ë¦¬
    â”‚   â”œâ”€â”€ AudioManager.js # ì˜¤ë””ì˜¤ ì¬ìƒ ê´€ë¦¬
    â”‚   â””â”€â”€ FirebaseManager.js # Firebase í†µì‹  ê´€ë¦¬
    â”‚
    â””â”€â”€ assets/
        â”œâ”€â”€ images/         # ì´ë¯¸ì§€ ë¦¬ì†ŒìŠ¤
        â””â”€â”€ audio/          # ì˜¤ë””ì˜¤ ë¦¬ì†ŒìŠ¤
```

---

## ê²Œì„ ì„¤ê³„

### ê²Œì„ ë£¨í”„ êµ¬ì¡°

```
requestAnimationFrame
  â†“
gameLoop(timestamp)
  â”œâ”€â”€ deltaTime ê³„ì‚° (í”„ë ˆì„ ë…ë¦½ì  ë¬¼ë¦¬ ì—°ì‚°)
  â”œâ”€â”€ update(deltaTime)  â†’ ê²Œì„ ë¡œì§ ì—…ë°ì´íŠ¸
  â”‚   â”œâ”€â”€ Background.update()
  â”‚   â”œâ”€â”€ Player.update()
  â”‚   â”œâ”€â”€ Obstacles.update()
  â”‚   â”œâ”€â”€ Items.update()
  â”‚   â”œâ”€â”€ ì¶©ëŒ ê°ì§€
  â”‚   â”œâ”€â”€ ì ìˆ˜ ì¦ê°€
  â”‚   â””â”€â”€ ì†ë„ ì¦ê°€
  â””â”€â”€ draw()             â†’ í™”ë©´ ë Œë”ë§
      â”œâ”€â”€ Background.draw()
      â”œâ”€â”€ Player.draw()
      â”œâ”€â”€ Obstacles.draw()
      â””â”€â”€ Items.draw()
```

### ìƒíƒœ ê´€ë¦¬

```javascript
GameManager {
  isGameStarted: false â†’ true  // ê²Œì„ ì‹œì‘ ì—¬ë¶€
  isGameOver: false â†’ true     // ê²Œì„ ì˜¤ë²„ ì—¬ë¶€
  isPaused: false â‡„ true       // ì¼ì‹œì •ì§€ í† ê¸€
}
```

### ì—”í‹°í‹° ìƒëª…ì£¼ê¸°

```
ìƒì„± â†’ ì—…ë°ì´íŠ¸ â†’ ì¶©ëŒ ì²´í¬ â†’ ì‚­ì œ íŒì • â†’ ì œê±°
  â†“       â†“          â†“             â†“
 new   update()  checkCollision()  filter()
```

---

## Firebase ê¸°ëŠ¥

### 1. ë¦¬ë”ë³´ë“œ ì‹œìŠ¤í…œ
- **ë°ì´í„°ë² ì´ìŠ¤**: Cloud Firestore
- **ì»¬ë ‰ì…˜**: `scores`
- **ê¸°ëŠ¥**:
  - ìƒìœ„ 10ê°œ ì ìˆ˜ ì‹¤ì‹œê°„ ì¡°íšŒ (`orderBy('score', 'desc').limit(10)`)
  - ê²Œì„ ì¢…ë£Œ ì‹œ 10ìœ„ ì§„ì… ì—¬ë¶€ ìë™ ì²´í¬
  - ë‹‰ë„¤ì„ ì…ë ¥ í›„ ì ìˆ˜ ì €ì¥
  - **ìµëª… ê¸°ë¡**: 10ìœ„ê¶Œ ë°–ì´ë¼ë„ 'Anonymous'ë¡œ ì ìˆ˜ ìë™ ì €ì¥

### 2. ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œ
- **ì»¬ë ‰ì…˜**: `config`
- **ë¬¸ì„œ**: `version`
- **ê¸°ëŠ¥**:
  - ì‹¤ì‹œê°„ìœ¼ë¡œ ì„œë²„ ë²„ì „ ê°ì§€ (`onSnapshot`)
  - í´ë¼ì´ì–¸íŠ¸ ë²„ì „(`Version.js`)ê³¼ ë‹¤ë¥¼ ê²½ìš° ì—…ë°ì´íŠ¸ ì•Œë¦¼ ë° ìƒˆë¡œê³ ì¹¨

### 3. ë°ì´í„° êµ¬ì¡° (Firestore)
```json
// scores ì»¬ë ‰ì…˜ ë¬¸ì„œ ì˜ˆì‹œ
{
  "playerName": "CatLover",
  "score": 1500,
  "timestamp": Timestamp(seconds=1706000000, nanoseconds=0),
  "date": "2025. 1. 23."
}
```

### 4. ğŸ”’ ë³´ì•ˆ ê·œì¹™ (Security Rules)
í”„ë¡œë•ì…˜ ë°°í¬ ì‹œ ì•„ë˜ ê·œì¹™ì„ Firestoreì— ì ìš©í•˜ì—¬ ë°ì´í„° ë¬´ê²°ì„±ì„ ë³´í˜¸í•˜ì„¸ìš”.

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /scores/{scoreId} {
      // ì½ê¸°ëŠ” ëˆ„êµ¬ë‚˜ ê°€ëŠ¥
      allow read: if true;
      
      // ì“°ê¸° ì¡°ê±´:
      // 1. ì ìˆ˜ëŠ” ìˆ«ìì—¬ì•¼ í•¨
      // 2. ì ìˆ˜ëŠ” 0 ì´ìƒ 100,000 ì´í•˜ (ë¹„ì •ìƒì ì¸ ì ìˆ˜ ë°©ì§€)
      // 3. ì´ë¦„ì€ 10ì ì´ë‚´
      allow create: if request.resource.data.score is number
                    && request.resource.data.score >= 0
                    && request.resource.data.score <= 100000
                    && request.resource.data.playerName.size() <= 10;
                    
      // ìˆ˜ì • ë° ì‚­ì œ ë¶ˆê°€ (ê¸°ë¡ ë³´ì¡´)
      allow update, delete: if false;
    }
    
    // ë²„ì „ ì •ë³´ ì½ê¸° í—ˆìš©
    match /config/version {
      allow read: if true;
      allow write: if false; // ê´€ë¦¬ìë§Œ ì½˜ì†”ì—ì„œ ìˆ˜ì •
    }
  }
}
```

---

## ì£¼ìš” í´ë˜ìŠ¤ ì„¤ëª…

### 1. **GameManager** (ê²Œì„ ì´ê´„)
**ì—­í• **: ê²Œì„ ë£¨í”„, ì—”í‹°í‹° ê´€ë¦¬, ì¶©ëŒ ê°ì§€, UI ì—…ë°ì´íŠ¸, Firebase ì—°ë™

**ì£¼ìš” ë©”ì„œë“œ**:
- `update(deltaTime)`: ê²Œì„ ìƒíƒœ ì—…ë°ì´íŠ¸
- `draw()`: í™”ë©´ ë Œë”ë§
- `checkCollision(a, b)`: AABB ì¶©ëŒ ê°ì§€
- `submitScore()`: ì ìˆ˜ ì œì¶œ ë° ë¦¬ë”ë³´ë“œ ê°±ì‹ 

### 2. **Player** (í”Œë ˆì´ì–´)
**ì—­í• **: ê³ ì–‘ì´ ìºë¦­í„° ì¡°ì‘, ì• ë‹ˆë©”ì´ì…˜, ë¬¼ë¦¬ ì—°ì‚°

**ìƒíƒœ**:
- `RUN`: ë‹¬ë¦¬ê¸° (í”„ë ˆì„ 0-7)
- `JUMP`: ì í”„ (í”„ë ˆì„ 8-11)
- `SLIDE`: ìŠ¬ë¼ì´ë“œ (í”„ë ˆì„ 12-15)

**ëª¨ë°”ì¼ ìµœì í™”**:
- í™”ë©´ ì™¼ìª½ 25% ìœ„ì¹˜ì— ê³ ì • (ì‹œì•¼ í™•ë³´)
- ì í”„ ì‹œ ì•½ê°„ ì•ìœ¼ë¡œ ì´ë™í•˜ì—¬ ì—­ë™ê° ë¶€ì—¬
- Delta Time ì ìš©ìœ¼ë¡œ ì£¼ì‚¬ìœ¨ ë…ë¦½ì  ë¬¼ë¦¬ ì—°ì‚°

### 3. **Obstacle** (ì¥ì• ë¬¼)
**ì—­í• **: ì¥ì• ë¬¼ ìƒì„± ë° ê´€ë¦¬

**íƒ€ì…**:
- **ì§€ìƒ ì¥ì• ë¬¼** (60%): í—ˆë“¤(100px), ì“°ë ˆê¸°í†µ(100px, 30%)
- **ê³µì¤‘ ì¥ì• ë¬¼** (40%): ë“œë¡  (80x80, ì• ë‹ˆë©”ì´ì…˜)

---

## ê²Œì„ ë°¸ëŸ°ìŠ¤ ìˆ˜ì¹˜

### í”Œë ˆì´ì–´
```javascript
width: 80px
height: 80px (ìŠ¬ë¼ì´ë“œ ì‹œ 56px)
jumpPower: 12
weight (ì¤‘ë ¥): 0.5
íˆíŠ¸ë°•ìŠ¤: 50% (40x40)
ì´ˆê¸° ìœ„ì¹˜: x=200 (í™”ë©´ 25%)
```

### ì¥ì• ë¬¼
```javascript
// ì§€ìƒ ì¥ì• ë¬¼
ì¼ë°˜: 100x50, íˆíŠ¸ë°•ìŠ¤ Xì¶• 70%
ê¸´ ì¥ì• ë¬¼: 100x50, íˆíŠ¸ë°•ìŠ¤ Xì¶• 70%

// ê³µì¤‘ ì¥ì• ë¬¼ (ë“œë¡ )
í¬ê¸°: 80x80
íˆíŠ¸ë°•ìŠ¤: Xì¶• 60%, Yì¶• 40% (ë‚©ì‘í•¨)
ì• ë‹ˆë©”ì´ì…˜: 1x4 ìŠ¤í”„ë¼ì´íŠ¸, 10 FPS
ê³µê²©: ì ìˆ˜ 5000ì  ì´ìƒ ì‹œ í”Œë ˆì´ì–´ë¥¼ í–¥í•´ ë ˆì´ì € ë°œì‚¬
```

### ë‚œì´ë„ ì¡°ì ˆ (v1.1.0 ê¸°ì¤€)
```javascript
// ì¥ì• ë¬¼ ìƒì„± ê°„ê²© (ms)
ê¸°ë³¸ ê°„ê²©: 2300ms
ì†ë„ ê°ì†Œ: gameSpeed * 250
ì ìˆ˜ ê°ì†Œ: score * 0.1
ìµœì†Œ ê°„ê²©: 500ms
ëœë¤ í¸ì°¨: Â±500ms
```

---

## ğŸ¯ ì„±ëŠ¥ ìµœì í™”

### í˜„ì¬ ìµœì í™” ì‚¬í•­
1. âœ… **deltaTime ìº¡í•‘**: íƒ­ ì „í™˜ ì‹œ ë¹„ì •ìƒ ë™ì‘ ë°©ì§€
2. âœ… **ì—”í‹°í‹° í’€ë§**: í™”ë©´ ë°– ì—”í‹°í‹° ì¦‰ì‹œ ì‚­ì œ
3. âœ… **requestAnimationFrame**: ë¸Œë¼ìš°ì € ìµœì í™” í™œìš©
4. âœ… **Page Visibility API**: ë¹„í™œì„± íƒ­ ìë™ ì¼ì‹œì •ì§€
5. âœ… **ì´ë¯¸ì§€ í”„ë¦¬ë¡œë”©**: ê²Œì„ ì‹œì‘ ì „ ë¦¬ì†ŒìŠ¤ ë¯¸ë¦¬ ë¡œë“œí•˜ì—¬ ê¹œë¹¡ì„ ë°©ì§€
6. âœ… **PWA ì§€ì›**: ëª¨ë°”ì¼ í™ˆ í™”ë©´ ì¶”ê°€ ë° ë…ë¦½ ì‹¤í–‰ ëª¨ë“œ

### ì¶”ê°€ ìµœì í™” ì•„ì´ë””ì–´
- ìŠ¤í”„ë¼ì´íŠ¸ ì•„í‹€ë¼ìŠ¤ ì‚¬ìš©
- ì˜¤í”„ìŠ¤í¬ë¦° ìº”ë²„ìŠ¤ í™œìš©
- Web Workerë¡œ ë¬¼ë¦¬ ì—°ì‚° ë¶„ë¦¬

---

## ê°œë°œ í™˜ê²½ ì„¤ì •

### 1. ì„œë²„ ì‹¤í–‰

**Windows (PowerShell)**:
```powershell
# ì‹¤í–‰ ê¶Œí•œ ì„¤ì • (ìµœì´ˆ 1íšŒ)
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

# ì„œë²„ ì‹œì‘
.\server.ps1
```

**ë¸Œë¼ìš°ì €**:
```
http://localhost:8000
```
(ëª¨ë°”ì¼ í…ŒìŠ¤íŠ¸ ì‹œ: `http://ë‚´PC_IP:8000`)

### 2. Firebase ì„¤ì •
1. `src/utils/FirebaseManager.js` íŒŒì¼ì—ì„œ `firebaseConfig` ê°ì²´ ìˆ˜ì •
2. Firestore Database ìƒì„± (í…ŒìŠ¤íŠ¸ ëª¨ë“œ ê¶Œì¥)
3. `config` ì»¬ë ‰ì…˜ -> `version` ë¬¸ì„œ ìƒì„± (`version: "1.1.0"`)

---

## ìˆ˜ì • ê°€ì´ë“œ

### âš™ï¸ ê²Œì„ ë°¸ëŸ°ìŠ¤ ì¡°ì •

#### 1. ìµœëŒ€ ì†ë„ ë³€ê²½
```javascript
// GameManager.js - constructor
this.MAX_GAME_SPEED = 4.5; // ê°’ ì¡°ì •
```

#### 2. ì¥ì• ë¬¼ ìƒì„± ë¹ˆë„ ì¡°ì •
```javascript
// GameManager.js - update()
const speedReduction = this.gameSpeed * 250; // ê³„ìˆ˜ ì¡°ì • (â†‘ ë” ë¹ ë¥´ê²Œ)
const scoreReduction = this.score * 0.1;     // ê³„ìˆ˜ ì¡°ì • (â†‘ ë” ë¹ ë¥´ê²Œ)
const baseInterval = 2300;                   // ê¸°ë³¸ê°’ ì¡°ì • (â†“ ë” ìì£¼)
const minInterval = 500;                     // ìµœì†Œê°’ ì¡°ì • (â†“ ë” ì´˜ì´˜)
```

#### 3. ì í”„ë ¥ ì¡°ì •
```javascript
// Player.js - constructor
this.jumpPower = 12; // ê°’ ì¡°ì • (â†‘ ë” ë†’ê²Œ)
this.weight = 0.5;   // ê°’ ì¡°ì • (â†‘ ë” ë¹ ë¥´ê²Œ ë–¨ì–´ì§)
```

---

**Happy Coding! ğŸ±ğŸ’¨**
